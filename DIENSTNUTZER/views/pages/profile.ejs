<!-- views/pages/register.ejs -->

<!DOCTYPE html>
<html lang="en">

<head>
    <% include ../partials/head %>
</head>

<body class="container">

    <header>
        <% include ../partials/header %>
    </header>

    <main>

        <div class="panel panel-default main-panel ">
            <section>
                <h2>Userinfo:</h2>
                <div class="image-container">
                    <img class="img-circle" width="200" height="200" src="/img/user.gif" />
                </div>
                <div class="form-group">
                    <label for="email">Email-adresse:</label>
                    <input type="email" class="form-control" id="email" disabled="disabled" value="<%= user.email %>">
                </div>
                <div class="form-group">
                    <label for="username">Username:</label>
                    <input type="text" class="form-control" id="username" value="<%= user.username %>">
                </div>
                <div class="buttonbar">
                    <button type="button" class="btn btn-success" id="btn-save">Speichern</button>
                </div>
            </section>
            <section>
                <h2>Videos:</h2>
                <% for(var i=0; i<videoList.length; i++) {%>
                    <article class="video">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <%= videoList[i].title %>
                            </div>
                            <div class="panel-body container-fluid">
                                <div class="row">
                                    <div class="col-sm-7">
                                        <%= videoList[i].description %>
                                    </div>
                                    <div class="col-sm-3">
                                        <select multiple class="video-tags" disabled="disabled">
                                            <% for(var j=0; j<videoList[i].tags.length; j++) {%>
                                                <option value="<%= videoList[i].tags[j] %>">
                                                    <%= videoList[i].tags[j] %>
                                                </option>
                                                <% } %>
                                        </select>
                                    </div>
                                    <div class="col-sm-2">
                                        <button type="button" name="<%= videoList[i].id %>" class="btn btn-default btn-xs btn-profile-video-delete" href="/video/<%= videoList[i].id %>/delete">
                                            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span><span>Löschen</span>
                                        </button>
                                        <button type="button" name="<%= videoList[i].id %>" class="btn btn-default btn-xs btn-profile-video-edit" href="/video/<%= videoList[i].id %>/edit">
                                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span><span>Bearbeiten</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </article>
                    <% } %>
            </section>
        </div>



    </main>

    <footer>
        <% include ../partials/footer %>
    </footer>
    <script>
        $(document).ready(function () {

            initTagFieldsOnPage();
            $("#btn-save").on("click", updateUser);

            $(".btn-profile-video-edit").on("click", function () {
                window.location = $(this).attr('href');
            });
            $(".btn-profile-video-delete").on("click", function () {
                var _confirm = confirm('Wollen Sie dieses Video wirklich löschen?');
                if (_confirm) {
                    $.ajax({
                        type: "GET"
                        , url: $(this).attr('href')
                        , complete: function (data) {
                            location.reload(true);
                        }
                    });
                }
            });
            $(".btn-save").on("click", updateUser);
        });
    </script>
</body>

</html>